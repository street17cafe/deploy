(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){e.exports=a(165)},165:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),c=a.n(i),o=a(255),l=a(241),s=a(14),u=a(45),d=a(7),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.Snackbar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SNACKBAR::SUCCESS":return Object(d.a)({},e,{open:!0,message:t.message,type:"success"});case"SNACKBAR::ERROR":return Object(d.a)({},e,{open:!0,message:t.message,type:"error"});case"SNACKBAR::WARNING":return Object(d.a)({},e,{open:!0,message:t.message,type:"warning"});case"SNACKBAR::INFO":return Object(d.a)({},e,{open:!0,message:t.message,type:"info"});case"SNACKBAR::CLOSE":return Object(d.a)({},e,{open:!1,message:""});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.Auth,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH::LOGIN_REQUEST":return Object(d.a)({},e,{isRequesting:!0});case"AUTH::LOGIN_SUCCESS":return Object(d.a)({},e,{isRequesting:!1,token:t.token,username:t.username});case"AUTH::LOGIN_FAIL":return Object(d.a)({},e,{isRequesting:!1,error:!0});case"AUTH::LOGOUT":return Object(d.a)({},e,{token:"",username:""});default:return e}},f=a(18),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.Category,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CATEGORY::REQUEST":return Object(d.a)({},e,{isFetching:!0});case"CATEGORY::SUCCESS":return Object(d.a)({},e,{isFetching:!1,items:t.data});case"CATEGORY::FAIL":return Object(d.a)({},e,{isFetching:!1});case"CATEGORY::ADD_REQUEST":return Object(d.a)({},e,{addRequest:!0});case"CATEGORY::ADD_SUCCESS":return Object(d.a)({},e,{addRequest:!1,items:[].concat(Object(f.a)(e.items),[t.data])});case"CATEGORY::ADD_FAIL":return Object(d.a)({},e,{addRequest:!1});case"CATEGORY::DELETE_REQUEST":return Object(d.a)({},e,{deleteRequest:!0});case"CATEGORY::DELETE_SUCCESS":return Object(d.a)({},e,{items:e.items.filter(function(e){return e.id!==t.id}),deleteRequest:!1});case"CATEGORY::DELETE_FAIL":return Object(d.a)({},e,{deleteRequest:!1});default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.Dish,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DISH::ADD_REQUEST":return Object(d.a)({},e,{addRequest:!0});case"DISH::ADD_SUCCESS":case"DISH::ADD_FAIL":return Object(d.a)({},e,{addRequest:!1});case"DISH::GET_REQUEST":return Object(d.a)({},e,{getRequest:!0,item:{}});case"DISH::GET_SUCCESS":return Object(d.a)({},e,{getRequest:!1,item:t.data});case"DISH::GET_FAIL":return Object(d.a)({},e,{getRequest:!1});case"DISH::UPDATE_SUCCESS":return Object(d.a)({},e,{updateRequest:!1,error:!1});case"DISH::UPDATE_REQUEST":return Object(d.a)({},e,{updateRequest:!0});default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.Menu,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENU::REQUEST":return Object(d.a)({},e,{isFetching:!0});case"MENU::SUCCESS":return Object(d.a)({},e,{isFetching:!1,items:t.data});case"MENU::FAIL":return Object(d.a)({},e,{isFetching:!1});case"MENU::DELETE_REQUEST":return Object(d.a)({},e,{deleteRequest:!0});case"MENU::DELETE_SUCCESS":return Object(d.a)({},e,{deleteRequest:!1,items:e.items.filter(function(e){return e.id!==t.id})});case"MENU::DELETE_FAIL":return Object(d.a)({},e,{deleteRequest:!1});case"MENU::UPDATE":return Object(d.a)({},e,{items:e.items.map(function(e){return e.id===t.data.id?t.data:e})});default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.Settings;switch((arguments.length>1?arguments[1]:void 0).type){case"SETTINGS::TOGGLE_REFRESH_MENU":return Object(d.a)({},e,{autoRefreshMenu:!e.autoRefreshMenu});case"SETTINGS::TOGGLE_REFRESH_CATEGORY":return Object(d.a)({},e,{autoRefreshCategory:!e.autoRefreshCategory});case"SETTINGS::TOGGLE_REFRESH_PAYMENT":return Object(d.a)({},e,{autoRefreshPayment:!e.autoRefreshPayment});default:return e}},v={Snackbar:{open:!1,message:"This is default message",type:"success",duration:6e3},Auth:{isRequesting:!1,token:"",username:"",error:!1},Category:{isFetching:!1,items:[],addRequest:!1,deleteRequest:!1},Dish:{addRequest:!1,error:!1,getRequest:!1},Menu:{isFetching:!1,items:[]},Settings:{autoRefreshMenu:!1,autoRefreshCategory:!1,autoRefreshPayment:!0}},y=Object(u.c)({Snackbar:m,Auth:g,Category:E,Dish:h,Menu:p,Settings:b}),C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,S={};try{S=localStorage.getItem("backendState")?JSON.parse(localStorage.getItem("backendState")):{}}catch(va){console.log("Unable to read store from localstorage",va)}var O=Object(u.e)(y,S,C(Object(u.a)(function(e){var t=e.getState;return function(e){return function(a){var n=e(a);return localStorage.setItem("backendState",JSON.stringify({Auth:t().Auth,Menu:t().Menu,Settings:t().Settings})),n}}}))),w=a(221),R=a(222),D=a(265),j=a(223),k=a(78),T=a(220),N=a(219),A=a(213),I=a(216),U=a(217),_=a(218),x=function(e){return{type:"SNACKBAR::SUCCESS",message:e}},L=function(e){return{type:"SNACKBAR::ERROR",message:e}},G={success:r.a.createElement(A.a,null),warning:r.a.createElement(I.a,null),error:r.a.createElement(U.a,null),info:r.a.createElement(_.a,null)},M=Object(N.a)(function(e){return{success:{backgroundColor:k.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:T.a[700]},icon:{fontSize:20,marginRight:e.spacing(1)},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}),q=function(e){var t=M(),a=e.variant;return r.a.createElement(w.a,{className:t[a],"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},G[a],e.message),action:[r.a.createElement(R.a,{key:"close","aria-label":"Close",color:"inherit",onClick:e.onClose},r.a.createElement(j.a,null))]})},F=Object(s.b)(function(e){return Object(d.a)({},e.Snackbar)},function(e){return{handleClose:function(){return e({type:"SNACKBAR::CLOSE"})}}})(function(e){return r.a.createElement(D.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:e.duration,onClose:e.handleClose},r.a.createElement(q,{onClose:e.handleClose,variant:e.type,message:e.message}))}),H=a(32),P=a(8),B=a(46),W=a(13),Q=a(225),z=a(71),Y=a.n(z),K=a(226),J=a(80);var V=function(e){return r.a.createElement(Q.a,{position:"fixed",className:e.classes.appBar},r.a.createElement(K.a,null,r.a.createElement(R.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e.handleDrawerToggle,className:e.classes.menuButton},r.a.createElement(Y.a,null)),r.a.createElement(J.a,{variant:"h6",noWrap:!0},"Street 17 cafe")))},X=a(229),$=a(261),Z=a(231),ee=a(232),te=a(167),ae=a(228),ne=a(227),re=a(112),ie=a.n(re),ce={isLoggedIn:function(){return""!==O.getState().Auth.token},logUserIn:function(e){},logOut:function(){localStorage.removeItem("auth")},getToken:function(){return O.getState().Auth.token},getUsername:function(){return O.getState().Auth.username}},oe="https://street17cafe.in";function le(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"get",r={headers:Object(d.a)({Authorization:"Bearer "+ce.getToken()},a),method:n.toLowerCase()};return"get"===r.method?r.params=t:r.data=t,ie()("".concat(oe).concat(e),r)}var se=function(e){var t="Error occured";try{if("string"===typeof e)return e;console.log(e.response.data),t=e.response.data.message||e.message,e.response.data.success||(t=e.response.data.error.message)}catch(e){t="Some error has occured. Try again in sometime"}return"object"===typeof t&&(t="Unknow error occured"),t},ue=a(66),de=a.n(ue),me=a(114),ge=a.n(me),fe=a(79),Ee=a.n(fe),he=a(90),pe=a.n(he),be=a(91),ve=a.n(be),ye=a(260),Ce=a(73),Se=a.n(Ce),Oe=a(233),we=a(234),Re=Object(N.a)(function(e){return{toolbar:e.mixins.toolbar,bottomNav:{position:"fixed",zIndex:99,width:"100%",left:0,bottom:0}}}),De=function(e){return r.a.createElement(te.a,{onClick:e.onClick,button:!0,selected:e.selected},r.a.createElement(ne.a,null,e.icon),r.a.createElement(ae.a,{primary:e.title}))};var je=Object(B.i)(Object(s.b)(null,function(e){return{logout:function(){return e({type:"AUTH::LOGOUT"})}}})(function(e){var t=Object(X.a)("(min-width:600px)"),a=Re(),n=Object(B.g)(),i=r.a.useState(0),c=Object(W.a)(i,2),o=c[0],l=c[1];function s(t,a){n.push(t),e.handleDrawerToggle(!1),l(a)}return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{variant:t?"permanent":"temporary",open:e.open,onClose:function(){return e.handleDrawerToggle(!1)},classes:{paper:e.drawerStyle},ModalProps:{keepMounted:!0}},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(Z.a,null),r.a.createElement(ee.a,null,r.a.createElement(De,{icon:r.a.createElement(pe.a,null),title:"Menu",onClick:function(){return s("/dish/menu",0)},selected:0===o}),r.a.createElement(De,{icon:r.a.createElement(de.a,null),title:"Category",onClick:function(){return s("/category",1)},selected:1===o}),r.a.createElement(De,{icon:r.a.createElement(ve.a,null),title:"Search",onClick:function(){return s("/search",2)},selected:2===o}),r.a.createElement(De,{icon:r.a.createElement(Se.a,null),title:"Payment Method",onClick:function(){return s("/payment_method",3)},selected:3===o})),r.a.createElement(Z.a,null),r.a.createElement(ee.a,null,ce.isLoggedIn()?r.a.createElement(r.a.Fragment,null,r.a.createElement(De,{icon:r.a.createElement(Ee.a,null),title:ce.getUsername(),onClick:function(){return s("/settings",11)}}),r.a.createElement(De,{icon:r.a.createElement(ge.a,null),title:"Logout",onClick:function(){s("/login",10),e.logout()}})):r.a.createElement(De,{icon:r.a.createElement(Ee.a,null),title:"Login",onClick:function(){return s("/login",10)},selected:10===o}))),r.a.createElement(ye.a,{smUp:!0},r.a.createElement(Oe.a,{value:o,className:a.bottomNav},r.a.createElement(we.a,{value:0,label:"Menu",icon:r.a.createElement(pe.a,null),onClick:function(){return s("/dish/menu",0)}}),r.a.createElement(we.a,{value:1,label:"Catgeory",icon:r.a.createElement(de.a,null),onClick:function(){return s("/category",1)}}),r.a.createElement(we.a,{value:2,label:"Search",icon:r.a.createElement(ve.a,null),onClick:function(){return s("/search",2)}}),r.a.createElement(we.a,{value:11,label:"Settings",icon:r.a.createElement(Ee.a,null),onClick:function(){return s("/settings",11)}}))))})),ke=Object(N.a)(function(e){return{root:{display:"flex"},appBar:Object(P.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(P.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),drawerPaper:{width:240}}});var Te=function(e){var t=ke(),a=r.a.useState(!1),n=Object(W.a)(a,2),i=n[0],c=n[1],o=function(e){c(void 0===e||"boolean"!==typeof e?!i:e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{classes:t,handleDrawerToggle:o}),r.a.createElement(je,{open:i,handleDrawerToggle:o,drawerStyle:t.drawerPaper}))},Ne=a(2),Ae=a(237),Ie=a(262),Ue=a(236),_e=a(235),xe=Object(N.a)(function(e){return{wrapper:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},buttonProgress:{position:"absolute"}}});function Le(e){var t=e.isLoading,a=e.children,n=Object(Ne.a)(e,["isLoading","children"]),i=xe();return r.a.createElement("div",{className:i.wrapper},r.a.createElement(_e.a,Object.assign({},n,{disabled:t}),a),t&&r.a.createElement(Ue.a,{size:24,className:i.buttonProgress}))}var Ge=a(258),Me=a(240),qe="CATEGORY::",Fe=function(e){return le("/api/category","","","GET").then(function(t){if(!t.data.success)throw new Error("Unable to fetch category");e({type:qe+"SUCCESS",data:t.data.data})}).catch(function(t){console.log(t),e(L(se(t))),e({type:qe+"FAIL"})}),{type:qe+"REQUEST"}},He=Object(N.a)(function(e){return{formRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingBottom:e.spacing(1),alignItems:"stretch"},label:{paddingLeft:e.spacing(1),border:"1px solid #efefef",flex:1,alignItems:"center",display:"flex"}}});function Pe(e){var t=He();return r.a.createElement(Ae.a,{fullWidth:!0,className:t.formRow+" "+t.container},r.a.createElement("label",{className:t.label,htmlFor:"#file_upload"},e.file.name||"No file selected"),r.a.createElement(_e.a,{onClick:e.onButtonClick,variant:"contained",color:"secondary",className:t.half}," Select File "),r.a.createElement("input",{type:"file",name:"file_upload",id:"file_upload",hidden:!0,onChange:e.handleChange}))}var Be=function(e){var t=r.a.useState(""),a=Object(W.a)(t,2),n=a[0],i=a[1];return r.a.createElement(Pe,{onButtonClick:function(){document.querySelector("#file_upload").click()},handleChange:function(e){0!==e.target.files.length&&i(e.target.files[0])},file:n})};function We(e){var t=new FormData;t.append("label",e.label),t.append("description",e.description),t.append("category_id",e.category_id),void 0!==e.file_upload&&""!==e.file_upload&&"string"!==typeof e.file_upload&&t.append("image",e.file_upload,e.file_upload.name);var a=[];return void 0!==e.r_price&&a.push({size:"R",price:e.r_price}),void 0!==e.m_price&&a.push({size:"M",price:e.m_price}),void 0!==e.l_price&&a.push({size:"L",price:e.l_price}),t.append("serving",JSON.stringify(a)),t}var Qe=function(e){if(void 0===e||e==={})return{};var t={label:e.label,description:e.description,category_id:e.category_id,image:e.image},a={},n=e.serving;if(void 0===n)return{};for(var r=0;r<n.length;r++)a="R"===n[r].size?Object(d.a)({},a,{r_price:n[r].price}):"M"===n[r].size?Object(d.a)({},a,{m_price:n[r].price}):Object(d.a)({},a,{l_price:n[r].price});return t=Object(d.a)({},t,{},a)},ze=function(e,t){return le("/api/dish/"+t,"","","DELETE").then(function(a){if(a.data.success)return e(x("Dish delete successfully")),e({type:"MENU::DELETE_SUCCESS",id:t});throw new Error("Unable to get dish")}).catch(function(t){e(L(se(t))),console.log(t.response,t)}),{type:"MENU::DELETE_REQUEST"}},Ye=function(e,t){return le("/api/dish/"+t,"","","GET").then(function(t){if(t.data.success)return e({type:"DISH::GET_SUCCESS",data:t.data.data[0]});throw new Error("Unable to get dish")}).catch(function(t){e(L("Unable to fetch dish"))}),{type:"DISH::GET_REQUEST"}},Ke=Object(N.a)(function(e){return{container:{background:"#fff",margin:e.spacing(1),width:"calc(100% -  ".concat(e.spacing(2),"px)"),boxShadow:e.shadows[1],borderRadius:4,position:"relative",padding:e.spacing(1)},heading:{margin:0,paddingBottom:e.spacing(1),fontWeight:400},formRow:{paddingBottom:e.spacing(1)}}}),Je=function(e){var t=e.rowClass,a=Object(Ne.a)(e,["rowClass"]),n=r.a.useState(a.value),i=Object(W.a)(n,2),c=i[0],o=i[1];return r.a.useEffect(function(){o(a.value)},[a.value]),r.a.createElement(Ae.a,{fullWidth:!0,className:t},r.a.createElement(Ie.a,Object.assign({fullWidth:!0},a,{value:c,onChange:function(e){return o(e.target.value)}})))},Ve=[{label:"Regular Price",name:"r_price"},{label:"Medium Price",name:"m_price"},{label:"Large Price",name:"l_price"}];var Xe=Object(s.b)(function(e){return{items:e.Category.items}},function(e){return{fetchCategory:function(){return e(Fe(e))}}})(function(e){var t=r.a.useState(e.selected||-1),a=Object(W.a)(t,2),n=a[0],i=a[1];return 0===e.items.length&&e.fetchCategory(),r.a.useEffect(function(){i(e.selected)},[e.selected]),r.a.createElement(Ae.a,{className:e.classes.formRow,fullWidth:!0},r.a.createElement(Ge.a,{value:n,onChange:function(e){return i(e.target.value)},fullWidth:!0,name:"category_id"},r.a.createElement(Me.a,{value:-1},"Select serving"),e.items.map(function(e){return r.a.createElement(Me.a,{key:e.id,value:e.id},e.label)})))});function $e(e){var t=Ke();return r.a.createElement("form",{component:"form",onSubmit:e.onSubmit,className:t.container},r.a.createElement("h1",{className:t.heading},"Dish details"),r.a.createElement(Z.a,null),r.a.createElement(Je,{label:"Title",rowClass:t.formRow,name:"label",required:!0,value:e.label||""}),r.a.createElement(Je,{label:"Description",rows:5,multiline:!0,rowClass:t.formRow,name:"description",required:!0,value:e.description||""}),r.a.createElement(l.a,{container:!0,justify:"center",spacing:1},Ve.map(function(a){return r.a.createElement(l.a,{item:!0,xs:6,key:a.label},r.a.createElement(Je,{label:a.label,type:"number",rowClass:t.formRow,name:a.name,value:e[a.name]||0}))})),r.a.createElement(Xe,{classes:t,selected:e.category_id||-1}),r.a.createElement(Be,null),r.a.createElement(Z.a,null),r.a.createElement(Le,{type:"submit",isLoading:e.loading,variant:"contained",fullWidth:!0,color:"primary"},"Add Dish"))}var Ze=Object(s.b)(function(e){return{Dish:e.Dish}},function(e){return{addDish:function(t){return e(function(e,t){return le("/api/dish",t,"","POST").then(function(t){if(console.log(t.data),t.data.success)return e(x("Dish added succesfully")),e({type:"DISH::ADD_SUCCESS",item:t.data.data.item});throw new Error("Unable to add Dish")}).catch(function(t){console.log(t.response),e(L(se(t))),e({type:"DISH::ADD_FAIL"})}),{type:"DISH::ADD_REQUEST"}}(e,t))}}})(function(e){return r.a.createElement($e,Object.assign({onSubmit:function(t){console.log("Submit request"),t.preventDefault();for(var a=t.target.querySelectorAll("[name]"),n={},r=0;r<a.length;r++)n[a[r].getAttribute("name")]=a[r].value;var i=document.querySelector("[type=file]").files;console.log(i),n.file_upload=i[0],e.updateDish?e.updateDish(We(n)):e.addDish(We(n))},loading:e.Dish.addRequest},e))}),et=a(257),tt=a(248),at=a(256),nt=a(242),rt=a(243),it=a(246),ct=a(245),ot=a(244),lt=a(74),st=a.n(lt),ut=a(56),dt=a.n(ut),mt=Object(N.a)({media:{height:200},icon:{fontSize:16,marginRight:8}});function gt(e){var t=mt();return r.a.createElement(nt.a,{className:t.card},r.a.createElement(rt.a,{onClick:function(){return e.viewDish(e.id)}},r.a.createElement(ot.a,{className:t.media,image:"https://street17cafe.in"+e.image,title:"Contemplative Reptile",img:e.image}),r.a.createElement(ct.a,null,r.a.createElement(J.a,{gutterBottom:!0,variant:"h5",component:"h2",noWrap:!0},e.name),r.a.createElement(J.a,{variant:"body2",color:"textSecondary",component:"p"},e.description.length>100?e.description.substr(0,97)+"...":e.description))),r.a.createElement(it.a,null,r.a.createElement(_e.a,{size:"small",color:"primary",variant:"contained",onClick:function(){return e.editDish(e.id)}},r.a.createElement(st.a,{className:t.icon})," edit"),r.a.createElement(_e.a,{size:"small",color:"primary",onClick:function(){return e.deleteDish(e.id)}},r.a.createElement(dt.a,{className:t.icon})," delete")))}var ft=a(116),Et=a.n(ft),ht=a(76),pt=a.n(ht),bt=a(75),vt=a.n(bt),yt=a(247),Ct=(a(264),a(263));function St(e){var t=e.children,a=e.value,n=e.index,i=Object(Ne.a)(e,["children","value","index"]);return r.a.createElement(J.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},i),r.a.createElement(at.a,{p:3},t))}var Ot=Object(N.a)(function(e){return{root:Object(P.a)({flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",width:"100%",flexDirection:"column",padding:0,minHeight:"calc(100vh - 64px)"},e.breakpoints.up("sm"),{flexDirection:"row"}),tabs:{borderRight:"1px solid ".concat(e.palette.divider),paddingTop:e.spacing(1),minWidth:200,maxWidth:"calc(100vw)"},container:{flexGrow:1,width:"100%",margin:0},panel:{width:"100%",overflow:"auto","&> div":{padding:window.innerWidth>500?24:8}},list:{width:"100%",boxShadow:e.shadows[1],backgroundColor:"#fff",borderRadius:8,position:"relative",overflow:"hidden"},switchContainer:{display:"flex",width:"100%",flexDirection:"row",backgroundColor:"#fff",alignItems:"center",padding:8,justifyContent:"space-between"}}});function wt(e){var t=Ot();return void 0===e.renderImages?null:e.renderImages?r.a.createElement(r.a.Fragment,null,e.dishes.map(function(t){return r.a.createElement(l.a,{item:!0,xs:12,md:6,key:t.id},r.a.createElement(gt,{image:t.image,description:t.description,name:t.label,id:t.id,editDish:function(t){return e.editClick(t)},deleteDish:e.deleteClick,viewDish:e.viewDish}))})):r.a.createElement(ee.a,{className:t.list},e.dishes.map(function(t){return r.a.createElement(te.a,{button:!0,key:t.id},r.a.createElement(ne.a,null,r.a.createElement(Et.a,null)),r.a.createElement(ae.a,{primary:t.label,secondary:t.description.substr(0,64)+"..."}),r.a.createElement(yt.a,null,r.a.createElement(R.a,{onClick:function(a){return e.addClick(t.id)}},r.a.createElement(pt.a,null))))}))}function Rt(e){var t=Ot(),a=Object(X.a)("(min-width:600px)"),n=r.a.useState(0),i=Object(W.a)(n,2),c=i[0],o=i[1];return console.log(a),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root},r.a.createElement(et.a,{orientation:a?"vertical":"horizontal",variant:"scrollable",value:c,onChange:function(e,t){o(t)},"aria-label":"Vertical tabs Menu",className:t.tabs},e.data.map(function(e,t){return r.a.createElement(tt.a,Object.assign({label:e.heading},function(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}(t),{key:t}))})),e.data.map(function(a,n){return r.a.createElement(St,{value:c,index:n,key:n,className:t.panel},r.a.createElement(l.a,{container:!0,spacing:1,className:t.container},r.a.createElement(wt,{dishes:a.items,editClick:function(t){return e.editClick(t)},deleteClick:function(t){return e.deleteClick(t)},viewDish:e.viewDish,renderImages:e.renderImages})))})))}var Dt=Object(N.a)(function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}}});function jt(e){var t=Dt();return r.a.createElement(r.a.Fragment,null,e.isLoading?r.a.createElement("div",{className:t.container},r.a.createElement(Ue.a,null)):e.children)}var kt=Object(N.a)(function(e){return{root:Object(P.a)({background:e.palette.secondary.main,boxShadow:e.shadows[2],height:48,width:48,borderRadius:"100%",position:"fixed",right:32,bottom:64,zIndex:100},e.breakpoints.up("sm"),{bottom:32}),button:{color:"#fff"}}});function Tt(e){var t=kt();return r.a.createElement("div",{className:t.root},r.a.createElement(R.a,{className:t.button,onClick:e.onClick},r.a.createElement(pt.a,null)))}var Nt=Object(N.a)(function(e){return{menuCardContainer:{padding:e.spacing(1)}}});var At=Object(s.b)(function(e){return{Menu:e.Menu,Category:e.Category}},function(e){return{fetchMenu:function(){return e(function(e){return le("/api/dish","","","GET").then(function(t){if(t.data.success)return e({type:"MENU::SUCCESS",data:t.data.data});throw new Error("Unable to get dish")}).catch(function(t){e(L(se(t))),console.log(t.response,t)}),{type:"MENU::REQUEST"}}(e))},deleteMenuItem:function(t){return e(ze(e,t))},fetchCategory:function(){return e(Fe(e))}}})(function(e){Nt();var t=Object(B.g)();r.a.useEffect(function(){0===e.Menu.items.length&&e.fetchMenu(),0===e.Category.items.length&&e.fetchCategory()},[]);var a=function(e,t){var a={};if(0===t.length||0===e.length)return[];for(var n=0;n<t.length;n++)a[t[n].id]={heading:t[n].label,items:[]};for(var r=0;r<e.length;r++)void 0!==a[e[r].category_id]&&a[e[r].category_id].items.push(e[r]);var i=[];for(var c in a)i.push(a[c]);return i}(e.Menu.items,e.Category.items);return r.a.createElement(l.a,{container:!0},r.a.createElement(jt,{isLoading:e.Menu.isFetching},r.a.createElement(Rt,{data:a,editClick:function(e){t.push("/dish/edit/"+e)},deleteClick:function(t){window.confirm("Do you wish to delete?")&&e.deleteMenuItem(t)},renderImages:!0,flipRender:e.flipRenderImages,viewDish:function(e){t.push("/dish/view/"+e)},refreshMenu:function(){return e.fetchMenu()}})),r.a.createElement(Tt,{onClick:function(){t.push("/dish/add")}}))});var It=Object(s.b)(function(e){return{Dish:e.Dish}},function(e){return{updateDish:function(t,a){return e(function(e,t,a){return le("/api/dish/"+a,t,"","POST").then(function(t){if(t.data.success)return e(x("Updated dish")),e({type:"MENU::UPDATE",data:t.data.data.item}),e({type:"DISH::UPDATE_SUCCESS"});throw new Error("Unable to get dish")}).catch(function(t){console.log(t.response),e(L("Unable to update dish"))}),{type:"DISH::UPDATE_REQUEST"}}(e,t,a))},getDish:function(t){return e(Ye(e,t))}}})(function(e){var t=Object(B.h)().dishId;r.a.useEffect(function(){e.getDish(t)},[]);var a=Qe(e.Dish.item);return r.a.createElement(Ze,Object.assign({loading:e.Dish.getRequest||e.Dish.updateRequest,selected:10},a,{updateDish:function(t){console.log(t),e.updateDish(t,e.Dish.item.id)}}))}),Ut=a(92),_t=a(249),xt=a(253),Lt=a(252),Gt=a(250),Mt=a(251);function qt(e){return r.a.createElement(Gt.a,null,r.a.createElement(Mt.a,{className:e.headerStyle},e.heading.map(function(t,a){return r.a.createElement(Lt.a,{key:a,className:e.headerStyle}," ",t," ")})))}function Ft(e){return r.a.createElement(Mt.a,{className:e.rowStyle},e.row.map(function(e,t){return r.a.createElement(Lt.a,{key:t},e)}))}var Ht=Object(N.a)(function(e){return{root:{padding:e.spacing(1)},media:{minHeight:320},content:{padding:e.spacing(1)},heading:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2),textTransform:"uppercase",fontWeight:400},description:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},table:{position:"relative",boxShadow:e.shadows[1],borderRadius:4,overflow:"hidden",marginTop:e.spacing(1)},tableHead:{background:"#212121",color:"#fff"}}});function Pt(e){var t=Ht();return console.log(e),r.a.createElement("div",{className:t.root},r.a.createElement(Ut.a,null,r.a.createElement(jt,{isLoading:e.loading},r.a.createElement(l.a,{container:!0},r.a.createElement(l.a,{item:!0,xs:12,sm:6},r.a.createElement(ot.a,{className:t.media,image:"https://street17cafe.in"+e.image,title:e.label,img:e.image})),r.a.createElement(l.a,{item:!0,xs:12,sm:6,className:t.content},r.a.createElement(J.a,{variant:"h5",className:t.heading},e.label),r.a.createElement(Z.a,null),r.a.createElement(J.a,{variant:"h6"},e.category),r.a.createElement(J.a,{variant:"body1",className:t.description},e.description),r.a.createElement(_t.a,{className:t.table},r.a.createElement(qt,{heading:["Sl No","Size","Price"],headerStyle:t.tableHead}),r.a.createElement(xt.a,null,e.serving.map(function(e,t){return r.a.createElement(Ft,{key:e.id,row:[t+1,e.size,e.price]})}))))))))}var Bt=Object(s.b)(function(e){return{Dish:e.Dish,Category:e.Category}},function(e){return{getDish:function(t){return e(Ye(e,t))},fetchCategory:function(){return e(Fe(e))}}})(function(e){var t=Object(B.h)().dishId;r.a.useEffect(function(){e.getDish(t),0===e.Category.items.length&&e.fetchCategory()},[]);for(var a=Qe(e.Dish.item),n="Unknow",i=0;i<e.Category.items.length;i++)if(+a.category_id===+e.Category.items[i].id){n=e.Category.items[i].label;break}return r.a.createElement(Pt,Object.assign({loading:e.Dish.getRequest,serving:[]},e.Dish.item,{category:n}))});var Wt=function(e){return r.a.createElement(B.d,null,r.a.createElement(B.b,{path:"/dish/add",component:Ze}),r.a.createElement(B.b,{path:"/dish/edit/:dishId",component:It}),r.a.createElement(B.b,{path:"/dish/view/:dishId",component:Bt}),r.a.createElement(B.b,{path:"/",component:At}))},Qt=a(254);var zt=function(e){return r.a.createElement(te.a,null,r.a.createElement(ae.a,{primary:e.text}),r.a.createElement(yt.a,null,r.a.createElement(R.a,{onClick:e.actionClick},e.secondaryIcon)))},Yt=Object(N.a)(function(e){return{container:{padding:e.spacing(1)},paper:{padding:e.spacing(1)},addCategory:{display:"flex"},textField:{flex:1}}});function Kt(e){var t=r.a.useState(""),a=Object(W.a)(t,2),n=a[0],i=a[1];return r.a.createElement("div",{className:e.classes.addCategory},r.a.createElement(Ie.a,{label:e.label,className:e.classes.textField,value:n,onChange:function(e){return i(e.target.value)}}),r.a.createElement(Le,{isLoading:e.request,variant:"contained",color:"primary",onClick:function(){n.length>1&&e.addRequest(n),console.log(n)}},"Add"))}function Jt(e){var t=e.items,a=Object(Ne.a)(e,["items"]),n=Yt();return r.a.createElement("div",{className:n.container},r.a.createElement(Ut.a,{className:n.paper},r.a.createElement(Kt,{label:"Add "+a.heading,classes:n,addRequest:a.addItem,request:a.addRequest}),r.a.createElement(ee.a,{subheader:r.a.createElement(Qt.a,null,a.heading)},r.a.createElement(jt,{isLoading:a.itemsRequest},t.map(function(e){return r.a.createElement(zt,{key:e.id,actionClick:function(){return a.actionClick(e.id)},text:e.label,secondaryIcon:r.a.createElement(dt.a,null)})})))))}var Vt=Object(s.b)(function(e){return{Category:e.Category}},function(e){return{fetchCategory:function(){return e(Fe(e))},addCategory:function(t){return e(function(e,t){return le("/api/category",t,"","POST").then(function(t){if(t.data.success)return e({type:qe+"ADD_SUCCESS",data:t.data.data.item});throw new Error(t.data.data.message)}).catch(function(t){e(L(se(t))),e({type:qe+"ADD_FAIL"})}),{type:qe+"ADD_REQUEST"}}(e,t))},deleteCategory:function(t){return e(function(e,t){return le("/api/category/"+t,"","","DELETE").then(function(a){if(a.data.success)return e({type:qe+"DELETE_SUCCESS",id:t});throw new Error(a.data.data.message)}).catch(function(t){e(L(se(t))),e({type:qe+"DELETE_FAIL"})}),{type:qe+"DELETE_REQUEST"}}(e,t))}}})(function(e){return r.a.useEffect(function(){0===e.Category.items.length&&e.fetchCategory()},[]),r.a.createElement(Jt,{items:e.Category.items,addItem:function(t){e.addCategory({label:t})},addRequest:e.Category.addRequest,itemsRequest:e.Category.isFetching,heading:"Category",actionClick:function(t){window.confirm("Do you wish to remove?")&&e.deleteCategory(t)}})}),Xt=Object(N.a)(function(e){return{container:{padding:e.spacing(1)},paper:{padding:e.spacing(1),"& > *":{marginBottom:e.spacing(1)}}}});var $t=Object(s.b)(function(e){return{Auth:e.Auth}},function(e){return{login:function(t){return e(function(e,t){return le("/api/auth/login",t,"","POST").then(function(a){if(a.data.success)return e(x("Logged in")),e({type:"AUTH::LOGIN_SUCCESS",username:t.username,token:a.data.data.token});throw new Error("Unable to login")}).catch(function(t){console.log(t.response),e({type:"AUTH::LOGIN_FAIL"}),e(L(se(t)))}),{type:"AUTH::LOGIN_REQUEST"}}(e,t))}}})(function(e){var t=r.a.useState(""),a=Object(W.a)(t,2),n=a[0],i=a[1],c=r.a.useState(""),o=Object(W.a)(c,2),l=o[0],s=o[1],u=Xt();return""!==e.Auth.token?(console.log("COnsole.log now must be redirected","/"),r.a.createElement(B.a,{to:"/"})):r.a.createElement("div",{className:u.container},r.a.createElement(Ut.a,{className:u.paper},r.a.createElement(J.a,null,"LOGIN: "),r.a.createElement(Z.a,null),r.a.createElement(Ie.a,{fullWidth:!0,value:n,onChange:function(e){return i(e.target.value)},label:"Username"}),r.a.createElement(Ie.a,{fullWidth:!0,type:"password",value:l,onChange:function(e){return s(e.target.value)},label:"Password"}),r.a.createElement(Le,{type:"submit",variant:"contained",color:"primary",onClick:function(){e.login({username:n,password:l})},fullWidth:!0,isLoading:e.Auth.isRequesting},"Login")))});var Zt=Object(s.b)(null,function(e){return{snackbarError:function(t){return e(L(t))}}})(function(e){var t=r.a.useState({request:!0,items:[]}),a=Object(W.a)(t,2),n=a[0],i=a[1],c=r.a.useState(!1),o=Object(W.a)(c,2),l=o[0],s=o[1];return r.a.useState(function(){le("/api/payment","","","GET").then(function(e){e.data.success&&i({request:!1,items:e.data.data.message})}).catch(function(e){return console.log(e.response)})},[]),r.a.createElement(Jt,{addRequest:l,itemsRequest:n.request,items:n.items,heading:"Payment methods",addItem:function(t){s(!0),le("/api/payment",{label:t},"","POST").then(function(e){console.log(e.data,e.data.success),e.data.success&&i({request:!1,items:[].concat(Object(f.a)(n.items),[e.data.data.message])}),s(!1)}).catch(function(t){e.snackbarError("Unable to add Category"),console.log(t.response)})},actionClick:function(t){window.confirm("Do you wish to remove?")&&le("/api/payment/"+t,"","","DELETE").then(function(e){if(!e.data.success)throw new Error("Error occured");i({request:!1,items:n.items.filter(function(e){return e.id!==t})})}).catch(function(t){e.snackbarError("Unable to remove item"),console.log(t.response)})}})}),ea=function(e){var t=e.component,a=Object(Ne.a)(e,["component"]),n=ce.isLoggedIn();return r.a.createElement(B.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(B.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ta=a(61),aa=Object(N.a)(function(e){return{root:{display:"flex",flexDirection:"row",alignItems:"center",padding:e.spacing(1)},inputContainer:{display:"flex",flex:1},resultContainer:{padding:e.spacing(1)},resultList:{background:"#fff",borderRadius:4,position:"relative",overflow:"hidden",boxShadow:e.shadows[1]},textClass:{textAlign:"left",justifyContent:"flex-start",width:"100%",height:"100%"},listItem:{alignItems:"stretch"}}});function na(e){var t=aa();return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.inputContainer},r.a.createElement(Ie.a,{placeholder:"Search Dish",value:e.search,onChange:e.onChange,fullWidth:!0,autoFocus:!0})))}var ra=function(e){return r.a.createElement(te.a,{className:e.itemClass},r.a.createElement(ne.a,null,r.a.createElement(R.a,{onClick:function(){return e.editClick(e.id)}},r.a.createElement(st.a,null))),r.a.createElement(ae.a,{primary:r.a.createElement(ta.a,{onClick:function(){return e.itemClick(e.id)},className:e.textClass},e.label)}),r.a.createElement(yt.a,null,r.a.createElement(R.a,{onClick:function(){return e.deleteClick(e.id)}},r.a.createElement(dt.a,null))))};function ia(e){var t=e.items,a=Object(Ne.a)(e,["items"]),n=aa();return r.a.createElement("div",{className:n.resultContainer},r.a.createElement(ee.a,{className:n.resultList},t.length>0?t.map(function(e,i){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(ra,Object.assign({},a,e,{key:e.id,textClass:n.textClass,itemClass:n.listItem})),i+1===t.length?null:r.a.createElement(Z.a,null))}):r.a.createElement(te.a,null,r.a.createElement(ae.a,{primary:"Search Dishes to get suggestions"}))))}var ca=Object(s.b)(null,function(e){return{deleteMenuItem:function(t){return e(ze(e,t))}}})(function(e){var t=Object(B.g)(),a=r.a.useState(""),n=Object(W.a)(a,2),i=n[0],c=n[1],o=r.a.useState([]),l=Object(W.a)(o,2),s=l[0],u=l[1];return r.a.createElement("div",null,r.a.createElement(na,{onChange:function(e){c(e.target.value),0!==e.target.value.length?le("/api/dish/search/"+e.target.value,"","","GET").then(function(e){u(e.data.data.dishes)}).catch(function(e){return console.log(e.response)}):u([])},search:i}),r.a.createElement(ia,{itemClick:function(e){t.push("/dish/view/"+e)},deleteClick:function(t){window.confirm("Do you wish to delete?")&&e.deleteMenuItem(t)},editClick:function(e){t.push("/dish/edit/"+e)},items:s}))}),oa=Object(N.a)(function(e){return{paperStyle:{background:"#fff",position:"relative",borderRadius:4,overflow:"hidden",boxShadow:e.shadows[1]}}});var la=function(e){var t=e.items,a=Object(Ne.a)(e,["items"]),n=oa();return r.a.createElement(ee.a,{className:a.listClass||n.paperStyle,subheader:r.a.createElement(Qt.a,null,a.heading||"")},t.map(function(e,n){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(te.a,Object.assign({className:a.itemClass||""},a.listItem),e.icon&&r.a.createElement(ne.a,null,e.icon),r.a.createElement(ae.a,{primary:e.primaryText,secondary:e.secondaryText||""}),e.secondaryIcon&&r.a.createElement(yt.a,null,e.secondaryIcon)),function(e,t,a){return e&&a<t-1?r.a.createElement(Z.a,null):null}(a.divider,t.length,n))}))},sa=a(117),ua=a.n(sa);var da=function(e){e.props;var t=function(e){return e.map(function(e,t){return Object(d.a)({id:t,icon:r.a.createElement(ua.a,null),secondaryIcon:r.a.createElement(R.a,{onClick:function(){return console.log("Refresh was clicked")}},r.a.createElement(vt.a,null))},e)})}([{primaryText:"Refresh Menu",triggerText:"REFRESH_MENU"}]);return r.a.createElement(la,{heading:"Refresh items",items:t})},ma={toggleRefreshMenu:"SETTINGS::TOGGLE_REFRESH_MENU",toggleRefreshCategory:"SETTINGS::TOGGLE_REFRESH_CATEGORY",toggleRefreshPayment:"SETTINGS::TOGGLE_REFRESH_PAYMENT"},ga=Object(N.a)(function(e){return{root:{padding:e.spacing(1),"& > *":{marginBottom:e.spacing(1)}}}});function fa(e){var t=e.settings,a=Object(Ne.a)(e,["settings"]),n=ga(),i=[{id:1,primaryText:"Auto Refresh Menu",icon:r.a.createElement(Y.a,null),secondaryIcon:r.a.createElement(Ct.a,{checked:t.autoRefreshMenu,onClick:function(){return a.settingsDispatch(ma.toggleRefreshMenu)}})},{id:2,primaryText:"Auto refresh Category",icon:r.a.createElement(de.a,null),secondaryIcon:r.a.createElement(Ct.a,{checked:t.autoRefreshCatgeory,onClick:function(){return a.settingsDispatch(ma.toggleRefreshCategory)}})},{id:3,primaryText:"Auto refresh Payment",icon:r.a.createElement(Se.a,null),secondaryIcon:r.a.createElement(Ct.a,{checked:t.autoRefreshPayment,onClick:function(){return a.settingsDispatch(ma.toggleRefreshPayment)}})}];return r.a.createElement("div",{className:n.root},r.a.createElement(la,{heading:"Site settings",items:i,divider:!0}),r.a.createElement(da,null))}var Ea=Object(s.b)(function(e){return{settings:e.Settings}},function(e){return{settingsDispatch:function(t){return e(function(e){return{type:e}}(t))}}})(function(e){var t=e.settings,a=Object(Ne.a)(e,["settings"]),n=ga();return r.a.createElement("div",{className:n.root},r.a.createElement(fa,{settings:t,settingsDispatch:function(e){return a.settingsDispatch(e)}}))}),ha=Object(N.a)(function(e){return{root:{display:"flex",width:"100%"},drawer:Object(P.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),toolbar:e.mixins.toolbar,content:{flexGrow:1}}}),pa=function(e){var t=ha();return r.a.createElement("div",{className:t.root},r.a.createElement("nav",{className:t.drawer,"aria-label":"mailbox folders"},r.a.createElement(Te,null)),r.a.createElement("div",{className:t.content},r.a.createElement("div",{className:t.toolbar}),r.a.createElement(B.d,null,r.a.createElement(ea,{path:"/category",component:Vt}),r.a.createElement(ea,{path:"/search",component:ca}),r.a.createElement(ea,{path:"/payment_method",component:Zt}),r.a.createElement(B.b,{path:"/login",component:$t}),r.a.createElement(B.b,{path:"/settings",component:Ea}),r.a.createElement(ea,{path:"/",component:Wt})),r.a.createElement(ye.a,{smUp:!0},r.a.createElement("div",{className:t.toolbar}))))};var ba=function(){return r.a.createElement(s.a,{store:O},r.a.createElement(H.a,null,r.a.createElement(l.a,{className:"App",container:!0},r.a.createElement(pa,null),r.a.createElement(o.a,null),r.a.createElement(F,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ba,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[137,1,2]]]);
//# sourceMappingURL=main.d577592c.chunk.js.map